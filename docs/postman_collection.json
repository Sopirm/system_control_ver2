{
  "info": {
    "name": "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð—Ð°Ð´Ð°Ñ‡Ð°Ð¼Ð¸ - Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ðµ Ð¢ÐµÑÑ‚Ñ‹",
    "description": "Ð£Ð¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð±Ñ‹ÑÑ‚Ñ€Ð¾Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ Ð¾ÑÐ½Ð¾Ð²Ð½Ñ‹Ñ… Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ API. Ð”Ð»Ñ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ postman_collection_comprehensive.json",
    "version": "1.1.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "orderId",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "ðŸ‘¥ Users",
      "item": [
        {
          "name": "Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Response has success field', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('success', true);",
                  "});",
                  "",
                  "pm.test('Response contains user data', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data).to.have.property('email');",
                  "    pm.expect(response.data).to.have.property('name');",
                  "    pm.expect(response.data).to.have.property('roles');",
                  "    ",
                  "    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²",
                  "    pm.collectionVariables.set('userId', response.data.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}",
                "description": "Request tracing ID"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\",\n  \"name\": \"Ð¢ÐµÑÑ‚Ð¾Ð²Ñ‹Ð¹ ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/register",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "users", "register"]
            }
          }
        },
        {
          "name": "ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response contains token', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('token');",
                  "    pm.expect(response.data).to.have.property('user');",
                  "    ",
                  "    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ Ñ‚Ð¾ÐºÐµÐ½ Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²",
                  "    pm.collectionVariables.set('authToken', response.data.token);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/login",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "users", "login"]
            }
          }
        },
        {
          "name": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile data is valid', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data).to.have.property('email', 'test@example.com');",
                  "    pm.expect(response.data).to.have.property('name');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "users", "profile"]
            }
          }
        },
        {
          "name": "ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»ÑŒ",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Profile updated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('name', 'ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð˜Ð¼Ñ');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð¾Ðµ Ð˜Ð¼Ñ\",\n  \"email\": \"test@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "users", "profile"]
            }
          }
        },
        {
          "name": "Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ (Admin)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Ð­Ñ‚Ð¾Ñ‚ Ñ‚ÐµÑÑ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ñ€Ð¾Ð²Ð°Ð»Ð¸Ñ‚ÑŒÑÑ ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ admin",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Users list retrieved', function () {",
                  "        const response = pm.response.json();",
                  "        pm.expect(response.data).to.have.property('users');",
                  "        pm.expect(response.data).to.have.property('total');",
                  "    });",
                  "} else if (pm.response.code === 403) {",
                  "    pm.test('Access denied for non-admin', function () {",
                  "        pm.expect(pm.response.code).to.equal(403);",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/users?limit=10&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "users"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ“¦ Orders",
      "item": [
        {
          "name": "Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 201', function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Order created successfully', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('id');",
                  "    pm.expect(response.data).to.have.property('status', 'ÑÐ¾Ð·Ð´Ð°Ð½');",
                  "    pm.expect(response.data).to.have.property('total_sum', 2100);",
                  "    ",
                  "    // Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÑÐµÐ¼ ID Ð·Ð°ÐºÐ°Ð·Ð° Ð´Ð»Ñ Ð´Ð°Ð»ÑŒÐ½ÐµÐ¹ÑˆÐ¸Ñ… Ñ‚ÐµÑÑ‚Ð¾Ð²",
                  "    pm.collectionVariables.set('orderId', response.data.id);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"product\": \"Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¾ÐºÐ¾Ð½\",\n      \"quantity\": 3,\n      \"price\": 500.00\n    },\n    {\n      \"product\": \"ÐœÐ¾Ð½Ñ‚Ð°Ð¶ Ð´Ð²ÐµÑ€ÐµÐ¹\",\n      \"quantity\": 2,\n      \"price\": 300.00\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/orders",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "orders"]
            }
          }
        },
        {
          "name": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÑÐ¿Ð¸ÑÐ¾Ðº Ð·Ð°ÐºÐ°Ð·Ð¾Ð²",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Orders list format is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('orders');",
                  "    pm.expect(response.data).to.have.property('total');",
                  "    pm.expect(response.data).to.have.property('limit');",
                  "    pm.expect(response.data).to.have.property('offset');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/orders?limit=10&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "orders"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð· Ð¿Ð¾ ID",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Order details are correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('id', pm.collectionVariables.get('orderId'));",
                  "    pm.expect(response.data).to.have.property('items');",
                  "    pm.expect(response.data.items).to.be.an('array');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/orders/{{orderId}}",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "orders", "{{orderId}}"]
            }
          }
        },
        {
          "name": "ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ Ð·Ð°ÐºÐ°Ð·Ð°",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Order status updated', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('status', 'Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"status\": \"Ð² Ñ€Ð°Ð±Ð¾Ñ‚Ðµ\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/v1/orders/{{orderId}}/status",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "orders", "{{orderId}}", "status"]
            }
          }
        },
        {
          "name": "ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð·Ð°ÐºÐ°Ð·",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Order cancelled', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('status', 'Ð¾Ñ‚Ð¼ÐµÐ½Ñ‘Ð½');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/v1/orders/{{orderId}}/cancel",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "orders", "{{orderId}}", "cancel"]
            }
          }
        }
      ]
    },
    {
      "name": "ðŸ“Š Events & System",
      "item": [
        {
          "name": "Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Events statistics format is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response.data).to.have.property('statistics');",
                  "    pm.expect(response.data).to.have.property('service');",
                  "    pm.expect(response.data).to.have.property('timestamp');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/v1/events/stats",
              "host": ["{{baseUrl}}"],
              "path": ["v1", "events", "stats"]
            }
          }
        },
        {
          "name": "Health Check",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Health check format is correct', function () {",
                  "    const response = pm.response.json();",
                  "    pm.expect(response).to.have.property('status');",
                  "    pm.expect(response).to.have.property('services');",
                  "    pm.expect(response).to.have.property('timestamp');",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "X-Request-ID",
                "value": "{{$guid}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "exec": [
          "// ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ ÑƒÑÑ‚Ð°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÐµÐ¼ X-Request-ID ÐµÑÐ»Ð¸ Ð¾Ð½ Ð½Ðµ Ð·Ð°Ð´Ð°Ð½",
          "if (!pm.request.headers.has('X-Request-ID')) {",
          "    pm.request.headers.add({",
          "        key: 'X-Request-ID',",
          "        value: pm.variables.replaceIn('{{$guid}}')  ",
          "    });",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "exec": [
          "// Ð“Ð»Ð¾Ð±Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ñ‚ÐµÑÑ‚Ñ‹ Ð´Ð»Ñ Ð²ÑÐµÑ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²",
          "pm.test('Response time is less than 5000ms', function () {",
          "    pm.expect(pm.response.responseTime).to.be.below(5000);",
          "});",
          "",
          "pm.test('Response has Content-Type header', function () {",
          "    pm.expect(pm.response.headers.has('Content-Type')).to.be.true;",
          "});",
          "",
          "// ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñƒ Ð¾Ñ‚Ð²ÐµÑ‚Ð° Ð´Ð»Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²",
          "if (pm.response.code >= 200 && pm.response.code < 300) {",
          "    try {",
          "        const response = pm.response.json();",
          "        if (response.hasOwnProperty('success')) {",
          "            pm.test('Response has proper success format', function () {",
          "                pm.expect(response).to.have.property('success');",
          "                if (response.success) {",
          "                    pm.expect(response).to.have.property('data');",
          "                } else {",
          "                    pm.expect(response).to.have.property('error');",
          "                }",
          "            });",
          "        }",
          "    } catch (e) {",
          "        // Ð˜Ð³Ð½Ð¾Ñ€Ð¸Ñ€ÑƒÐµÐ¼ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° JSON Ð´Ð»Ñ Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… endpoints",
          "    }",
          "}"
        ]
      }
    }
  ]
}
